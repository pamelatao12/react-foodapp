{"ast":null,"code":"import _slicedToArray from\"/Users/pamelatao/my-app/web/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"./restaurantCard.css\";import Collapsible from\"react-collapsible\";import Rating from\"./rating\";import Popover,{ArrowContainer}from\"react-tiny-popover\";var RestaurantCard=function RestaurantCard(_ref){var details=_ref.details,index=_ref.index;var _useState=useState(details.reviews),_useState2=_slicedToArray(_useState,2),restaurantReview=_useState2[0],setReviews=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];// const fetchReviews = async () => {\n//   try {\n//     console.log(\"attempting to fetch\", index);\n//     const response = await fetch(\n//       `http://localhost:4000/reviews?id=${details.alias}`,\n//       {\n//         headers: {\n//           \"Content-Type\": \"application/json\",\n//           Accept: \"application/json\"\n//         }\n//       }\n//     );\n//     const responseJson = await response.json();\n//     setLoading(false);\n//     console.log(\"reviews received for\", index, responseJson);\n//     setReviews(responseJson.reviews);\n//   } catch (error) {\n//     console.log(error);\n//   }\n// };\n//\n// useEffect(() => {\n//   if (!restaurantReview) {\n//     fetchReviews();\n//   }\n// }, []);\nvar restCategories=function restCategories(){var categories=\"\";details.categories.forEach(function(category){if(categories===\"\"){categories+=category.title;}else{categories+=\", \".concat(category.title);}});return categories;};var popoverBody=React.createElement(\"div\",null,\"hi\");var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPopoverOpen=_useState6[0],setIsPopoverOpen=_useState6[1];var triggerElement=React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"titleButtonWrapper\"},React.createElement(\"h2\",{className:\"eventTitle\"},index,\". \",details.name)),React.createElement(\"div\",{className:\"ratingAddressWrapper\"},React.createElement(\"div\",null,React.createElement(\"div\",{className:\"rating\"},React.createElement(Rating,{restaurantRating:details.rating}),React.createElement(\"div\",{className:\"reviewCount\"},details.review_count)),React.createElement(\"div\",{className:\"priceTags\"},React.createElement(\"div\",{className:\"price\"},details.price),details.price&&React.createElement(\"div\",{className:\"separator\"},String.fromCharCode(5867)),React.createElement(\"div\",{className:\"tags\"},restCategories()))),React.createElement(\"ul\",{className:\"address\"},React.createElement(\"li\",{className:\"addressList\"},details.phone&&\"(\"+details.phone.substring(2,5)+\") \"+details.phone.substring(5,8)+\"-\"+details.phone.substring(8)),React.createElement(\"li\",{className:\"addressList\"},details.location.address1),React.createElement(\"li\",{className:\"addressList\"},details.location.city))),React.createElement(\"div\",{className:\"seeReviewsButton\"},\"Reviews \\u25BF\"));return React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"restaurantActionButtons\"},React.createElement(Popover,{className:\"popoverStyle\",isOpen:isPopoverOpen,position:\"bottom\",padding:10,onClickOutside:function onClickOutside(){return setIsPopoverOpen(false);},content:function content(_ref2){var position=_ref2.position,targetRect=_ref2.targetRect,popoverRect=_ref2.popoverRect;return React.createElement(ArrowContainer,{position:position,targetRect:targetRect,popoverRect:popoverRect,arrowColor:\"#f7f7f7\",arrowSize:10,arrowStyle:{borderBottom:\"10px solid darkgrey\"}},React.createElement(\"div\",{className:\"popoverContent\",onClick:function onClick(){return setIsPopoverOpen(!isPopoverOpen);}},React.createElement(\"h2\",null,\"Add to upcoming events:\"),React.createElement(\"ul\",{className:\"eventsListPopover\"},React.createElement(\"li\",{className:\"eventPopover\"},\"Event 1\"),React.createElement(\"li\",{className:\"eventPopover\"},\"Event 2\"),React.createElement(\"li\",{className:\"eventPopover\"},\"Event 3\"),React.createElement(\"li\",{className:\"eventPopover\"},\"Event 1\"),React.createElement(\"li\",{className:\"eventPopover\"},\"Event 2\"),React.createElement(\"li\",{className:\"eventPopover\"},\"Event 3\"))));}},React.createElement(\"button\",{className:\"addButton\",onClick:function onClick(){return setIsPopoverOpen(!isPopoverOpen);}},\"+\")),React.createElement(\"button\",{className:\"heartButton\"},\"\\u2665\")),React.createElement(Collapsible,{classParentString:\"collapsibleRestaurant\",trigger:triggerElement,triggerTagName:\"div\"},React.createElement(\"div\",{className:\"collapsibleRestaurantContent\"},React.createElement(\"p\",{className:\"reviewCollapsibleContent\"},restaurantReview[0].text),restaurantReview[1]&&React.createElement(\"p\",{className:\"reviewCollapsibleContent\"},restaurantReview[1].text),\" \",restaurantReview[2]&&React.createElement(\"p\",{className:\"reviewCollapsibleContent\"},restaurantReview[2].text),React.createElement(\"a\",{className:\"yelpLinkBtn\",target:\"_blank\",href:details.url},\"See more on Yelp\"))));};export default RestaurantCard;","map":{"version":3,"sources":["/Users/pamelatao/my-app/web/src/restaurantCard.js"],"names":["React","useState","useEffect","Collapsible","Rating","Popover","ArrowContainer","RestaurantCard","details","index","reviews","restaurantReview","setReviews","loading","setLoading","restCategories","categories","forEach","category","title","popoverBody","isPopoverOpen","setIsPopoverOpen","triggerElement","name","rating","review_count","price","String","fromCharCode","phone","substring","location","address1","city","position","targetRect","popoverRect","borderBottom","text","url"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./restaurantCard.css\";\nimport Collapsible from \"react-collapsible\";\nimport Rating from \"./rating\";\nimport Popover, { ArrowContainer } from \"react-tiny-popover\";\n\nconst RestaurantCard = ({ details, index }) => {\n  const [restaurantReview, setReviews] = useState(details.reviews);\n  const [loading, setLoading] = useState(true);\n\n  // const fetchReviews = async () => {\n  //   try {\n  //     console.log(\"attempting to fetch\", index);\n  //     const response = await fetch(\n  //       `http://localhost:4000/reviews?id=${details.alias}`,\n  //       {\n  //         headers: {\n  //           \"Content-Type\": \"application/json\",\n  //           Accept: \"application/json\"\n  //         }\n  //       }\n  //     );\n  //     const responseJson = await response.json();\n  //     setLoading(false);\n  //     console.log(\"reviews received for\", index, responseJson);\n  //     setReviews(responseJson.reviews);\n  //   } catch (error) {\n  //     console.log(error);\n  //   }\n  // };\n  //\n  // useEffect(() => {\n  //   if (!restaurantReview) {\n  //     fetchReviews();\n  //   }\n  // }, []);\n  const restCategories = () => {\n    let categories = \"\";\n    details.categories.forEach(category => {\n      if (categories === \"\") {\n        categories += category.title;\n      } else {\n        categories += `, ${category.title}`;\n      }\n    });\n    return categories;\n  };\n\n  const popoverBody = <div>hi</div>;\n  const [isPopoverOpen, setIsPopoverOpen] = useState(false);\n\n  const triggerElement = (\n    <>\n      <div className=\"titleButtonWrapper\">\n        <h2 className=\"eventTitle\">\n          {index}. {details.name}\n        </h2>\n      </div>\n      <div className=\"ratingAddressWrapper\">\n        <div>\n          <div className=\"rating\">\n            <Rating restaurantRating={details.rating} />\n            <div className=\"reviewCount\">{details.review_count}</div>\n          </div>\n          <div className=\"priceTags\">\n            <div className=\"price\">{details.price}</div>\n            {details.price && (\n              <div className=\"separator\">{String.fromCharCode(5867)}</div>\n            )}\n            {/* todo: display categories separated by comma. use join(\", \")? */}\n            <div className=\"tags\">{restCategories()}</div>\n          </div>\n        </div>\n        <ul className=\"address\">\n          <li className=\"addressList\">\n            {details.phone &&\n              \"(\" +\n                details.phone.substring(2, 5) +\n                \") \" +\n                details.phone.substring(5, 8) +\n                \"-\" +\n                details.phone.substring(8)}\n          </li>\n          <li className=\"addressList\">{details.location.address1}</li>\n          <li className=\"addressList\">{details.location.city}</li>\n          {/*use zip code to get neighborhood*/}\n        </ul>\n      </div>\n      <div className=\"seeReviewsButton\">Reviews &#9663;</div>\n    </>\n  );\n\n  return (\n    <>\n      <div className=\"restaurantActionButtons\">\n        <Popover\n          className=\"popoverStyle\"\n          isOpen={isPopoverOpen}\n          position={\"bottom\"}\n          padding={10}\n          onClickOutside={() => setIsPopoverOpen(false)}\n          content={({ position, targetRect, popoverRect }) => (\n            <ArrowContainer\n              position={position}\n              targetRect={targetRect}\n              popoverRect={popoverRect}\n              arrowColor={\"#f7f7f7\"}\n              arrowSize={10}\n              arrowStyle={{\n                borderBottom: \"10px solid darkgrey\"\n              }}\n            >\n              <div\n                className=\"popoverContent\"\n                onClick={() => setIsPopoverOpen(!isPopoverOpen)}\n              >\n                <h2>Add to upcoming events:</h2>\n                <ul className=\"eventsListPopover\">\n                  <li className=\"eventPopover\">Event 1</li>\n                  <li className=\"eventPopover\">Event 2</li>\n                  <li className=\"eventPopover\">Event 3</li>\n                  <li className=\"eventPopover\">Event 1</li>\n                  <li className=\"eventPopover\">Event 2</li>\n                  <li className=\"eventPopover\">Event 3</li>\n                </ul>\n              </div>\n            </ArrowContainer>\n          )}\n        >\n          <button\n            className=\"addButton\"\n            onClick={() => setIsPopoverOpen(!isPopoverOpen)}\n          >\n            +\n          </button>\n        </Popover>\n\n        <button className=\"heartButton\">&#9829;</button>\n      </div>\n      <Collapsible\n        classParentString=\"collapsibleRestaurant\"\n        trigger={triggerElement}\n        triggerTagName=\"div\"\n      >\n        <div className=\"collapsibleRestaurantContent\">\n          <p className=\"reviewCollapsibleContent\">{restaurantReview[0].text}</p>\n          {restaurantReview[1] && (\n            <p className=\"reviewCollapsibleContent\">\n              {restaurantReview[1].text}\n            </p>\n          )}{\" \"}\n          {restaurantReview[2] && (\n            <p className=\"reviewCollapsibleContent\">\n              {restaurantReview[2].text}\n            </p>\n          )}\n          <a className=\"yelpLinkBtn\" target=\"_blank\" href={details.url}>\n            See more on Yelp\n          </a>\n        </div>\n      </Collapsible>\n    </>\n  );\n};\n\nexport default RestaurantCard;\n"]},"metadata":{},"sourceType":"module"}