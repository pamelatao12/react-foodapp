{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pamelatao/my-app/web/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pamelatao/my-app/web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/pamelatao/my-app/web/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import styles from\"./searchPage.module.css\";import NavBar from\"./navBar\";import SearchBar from\"./searchBar\";import Header from\"./header\";import Filter from\"./filter\";import RestaurantCard from\"./restaurantCard\";import{Link,useLocation}from\"react-router-dom\";import queryString from\"query-string\";var SearchPage=function SearchPage(){var location=useLocation();var parsed=queryString.parse(location.search);var _useState=useState(parsed.term),_useState2=_slicedToArray(_useState,2),searchKeyword=_useState2[0],setSearchKeyword=_useState2[1];var _useState3=useState(parsed.location),_useState4=_slicedToArray(_useState3,2),searchLocation=_useState4[0],setSearchLocation=_useState4[1];var _useState5=useState(undefined),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];// const [reviews, setFirstThreeReviews] = useState(undefined);\nvar _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,responseJson;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:4000/search?term=\".concat(searchKeyword,\"&location=\").concat(searchLocation,\"&limit=20\"),{headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\"}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:responseJson=_context.sent;setLoading(false);console.log(\"review data\",responseJson.reviews);console.log(\"data was fetched\",responseJson.search.business);// setFirstThreeReviews(responseJson.reviews);\nsetData(responseJson.search.business);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);if(!data){return React.createElement(\"div\",null);}return React.createElement(\"div\",{className:styles.searchPage,style:{backgroundImage:\"url(\\\"/food5.jpg\\\")\"}},React.createElement(\"div\",{className:styles.headerWrapper},React.createElement(Header,null),React.createElement(Link,{to:\"/\",className:styles.homeLogoButton},React.createElement(\"img\",{className:styles.siteLogo,src:\"./logo.png\",alt:\"logo\"})),React.createElement(\"div\",{className:styles.searchBar},React.createElement(SearchBar,null))),React.createElement(\"div\",{className:styles.searchWrapper},React.createElement(\"div\",{className:styles.filterWrapper},React.createElement(Filter,null)),React.createElement(\"div\",{className:styles.restaurantListWrapper},React.createElement(\"ul\",{className:styles.restaurantListUl},data.map(function(restaurantDetail,i){return React.createElement(\"li\",{className:styles.restaurantList,key:i},React.createElement(RestaurantCard,{details:restaurantDetail,index:i+1}));})))));};export default SearchPage;","map":{"version":3,"sources":["/Users/pamelatao/my-app/web/src/searchPage.js"],"names":["React","useState","useEffect","styles","NavBar","SearchBar","Header","Filter","RestaurantCard","Link","useLocation","queryString","SearchPage","location","parsed","parse","search","term","searchKeyword","setSearchKeyword","searchLocation","setSearchLocation","undefined","data","setData","loading","setLoading","fetchData","fetch","headers","Accept","response","json","responseJson","console","log","reviews","business","searchPage","backgroundImage","headerWrapper","homeLogoButton","siteLogo","searchBar","searchWrapper","filterWrapper","restaurantListWrapper","restaurantListUl","map","restaurantDetail","i","restaurantList"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport styles from \"./searchPage.module.css\";\nimport NavBar from \"./navBar\";\nimport SearchBar from \"./searchBar\";\nimport Header from \"./header\";\nimport Filter from \"./filter\";\nimport RestaurantCard from \"./restaurantCard\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport queryString from \"query-string\";\n\nconst SearchPage = () => {\n  const location = useLocation();\n  const parsed = queryString.parse(location.search);\n\n  const [searchKeyword, setSearchKeyword] = useState(parsed.term);\n  const [searchLocation, setSearchLocation] = useState(parsed.location);\n  const [data, setData] = useState(undefined);\n  // const [reviews, setFirstThreeReviews] = useState(undefined);\n  const [loading, setLoading] = useState(true);\n\n  const fetchData = async () => {\n    try {\n      const response = await fetch(\n        `http://localhost:4000/search?term=${searchKeyword}&location=${searchLocation}&limit=20`,\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\"\n          }\n        }\n      );\n      const responseJson = await response.json();\n      setLoading(false);\n      console.log(\"review data\", responseJson.reviews);\n      console.log(\"data was fetched\", responseJson.search.business);\n      // setFirstThreeReviews(responseJson.reviews);\n      setData(responseJson.search.business);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  if (!data) {\n    return <div />;\n  }\n\n  return (\n    <div\n      className={styles.searchPage}\n      style={{ backgroundImage: `url(\"/food5.jpg\")` }}\n    >\n      <div className={styles.headerWrapper}>\n        <Header />\n        {/* <NavBar /> */}\n        <Link to=\"/\" className={styles.homeLogoButton}>\n          <img className={styles.siteLogo} src=\"./logo.png\" alt=\"logo\" />\n        </Link>\n        <div className={styles.searchBar}>\n          <SearchBar />\n        </div>\n      </div>\n      <div className={styles.searchWrapper}>\n        <div className={styles.filterWrapper}>\n          <Filter />\n        </div>\n        <div className={styles.restaurantListWrapper}>\n          <ul className={styles.restaurantListUl}>\n            {data.map((restaurantDetail, i) => (\n              <li className={styles.restaurantList} key={i}>\n                <RestaurantCard details={restaurantDetail} index={i + 1} />\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SearchPage;\n"]},"metadata":{},"sourceType":"module"}